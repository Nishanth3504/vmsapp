<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="home"></ion-back-button>
    </ion-buttons>
    <ion-title>{{'WARNING_LIST' | translate }}</ion-title>
  </ion-toolbar>

  <ion-toolbar  class="searchBlock permitSearchBt">
    <ion-item>
      <ion-searchbar showCancelButton="never" (ionInput)="SearchWarnings($event)"></ion-searchbar>
      <ion-button  *ngIf="user_type == 12 || user_type == 32" (click)="toggleFilterOptions()" color="#f0f5fd"><ion-icon style="color: #31385B" name="filter-outline"></ion-icon></ion-button>
    </ion-item>

    <ion-list  *ngIf="showFilterOptions" class="filter-dropdown">
      <ion-item button (click)="selectFilterOption('all_warnings')">
        <ion-label>All Warnings</ion-label>
        <ion-icon *ngIf="selectedFilter === 'all_warnings'" name="checkmark" slot="end"></ion-icon>
      </ion-item>
      <ion-item  button (click)="selectFilterOption('my_warnings')">
        <ion-label>My Warnings</ion-label>
        <ion-icon *ngIf="selectedFilter === 'my_warnings'" name="checkmark" slot="end"></ion-icon>
      </ion-item>
    </ion-list>
  </ion-toolbar>
</ion-header>

<ion-content class="tranListWrapp m-top">
  <ng-container *ngIf="list">
  <ion-card class="tranListCard" *ngFor="let row of list">
    <ion-item lines="none">
      <ion-avatar slot="start">
        <div class="iAvatarLetter" *ngIf="row.side_type === '1'">IV</div>
        <div class="iAvatarLetter" *ngIf="row.side_type === '2'">CV</div>
        <div class="iAvatarLetter" *ngIf="row.side_type === '3'">VV</div>
        <div class="iAvatarLetter" *ngIf="row.side_type === '4'">VV</div>
      </ion-avatar>

      <ion-label class="ion-text-wrap">
        <div class="idTranList">
          <div>
            <ion-text>{{'WARNING_HOURS' | translate}} : {{row.hours_value}} hrs</ion-text>
          </div>
          
          <ion-text>{{row.reference_number}}</ion-text>
          <!-- <ion-text class="dateTranList"> - {{row.created_on | date: 'MMM d, y hh:mm' : 'UTC +4' }}</ion-text> -->
          <ion-text class="dateTranList"> - {{ row.created_on | date: 'MMM d, y HH:mm'}}</ion-text>
        </div>
        <div class="typeCategory">
          <ion-grid class="fineATranListBlock">
            <ion-row>
            
                <!-- *ngIf="row.side_type === '1'" -->
                      <ion-col size="12" sizeLg="4" sizeMd="6" sizeSm="6" *ngIf="row.side_type === '2'">
                        <ion-text>
                          <h4>{{'VIOLATION_TYPE' | translate }}</h4>
                        </ion-text>
                        <ion-text>                        
                          <h3>{{'COMMERCIAL_VIOLATION' | translate}}</h3>
                        </ion-text>
                      </ion-col>

                      <ion-col size="12" sizeLg="4" sizeMd="6" sizeSm="6" *ngIf="row.side_type === '3'">
                        <ion-text>
                          <h4>{{'VIOLATION_TYPE' | translate }}</h4>
                        </ion-text>
                        <ion-text>                      
                          <h3>{{'VEHICLE_EVIOLATION' | translate}}</h3>
                        </ion-text>
                      </ion-col>

                      <ion-col size="12" sizeLg="4" sizeMd="6" sizeSm="6">
                        <ion-text>
                          <h4>{{'Name' | translate}}</h4>
                        </ion-text>
                        <ion-text>                       
                          <h3>{{row.recipient_person}}</h3>
                        </ion-text>
                      </ion-col>

                      <ion-col size="12" sizeLg="4" sizeMd="6" sizeSm="6">
                        <ion-text>
                          <h4>Mobile no</h4>
                        </ion-text>
                        <ion-text>                       
                          <h3>{{row.recipient_mobile}}</h3>
                        </ion-text>
                      </ion-col>

                      <ion-col size="12" sizeLg="4" sizeMd="6" sizeSm="6" *ngIf="row.side_type === '3'">
                        <ion-text>
                          <h4>Plate Number</h4>
                        </ion-text>
                        <ion-text>                       
                          <h3>{{row.license_plate_no}}</h3>
                        </ion-text>
                      </ion-col>

                      <ion-col size="12" sizeLg="4" sizeMd="6" sizeSm="6" *ngIf="row.side_type === '2'">
                        <ion-text>
                          <h4>Licence number</h4>
                        </ion-text>
                        <ion-text>                       
                          <h3>{{row.license_no}}</h3>
                        </ion-text>
                      </ion-col>


                      <ion-col size="12" sizeLg="4" sizeMd="6" sizeSm="6">
                        <ion-text>
                          <h4>{{'WARNING_CATEGORY' | translate}}</h4>
                        </ion-text>
                        <ion-text>
                          <h5>{{setLanguage==='ar' ? row.description : row.description_eng}}</h5>
                        </ion-text>
                      </ion-col>

                      <ion-col size="12" sizeLg="4" sizeMd="6" sizeSm="6">
                        <ion-text>
                          <h4> {{'CREATED_BY' | translate}} </h4>
                        </ion-text>
                        <ion-text>
                          <h3>{{row.first_name}} {{row.last_name}} ({{row.role_name}})</h3>
                        </ion-text>
                      </ion-col>

                      <!-- <ion-col size="12" sizeLg="4" sizeMd="6" sizeSm="6">
                        <ion-text>
                          <h4> {{'WARNING_TO_VIOLATIONS' | translate}} {{'STATUS' | translate}} </h4>
                        </ion-text>
                        <ion-text>
                          <h3>{{row.warning_to_violation}}</h3>
                        </ion-text>
                      </ion-col> -->
            </ion-row>
          </ion-grid>
        </div>
        <div class="actionBts">
         
          <div class="iconBtBlock">        
            <ion-button class="iconBt" routerLink="/warningdetails/{{row.id}}">
              <ion-icon name="create-outline"></ion-icon>
            </ion-button>
            <ion-button class="iconBt" (click)="viewMapModal(row.fine_place)" *ngIf="row.fine_place !='' && row.fine_place!='null'">
              <ion-icon name="globe-outline"></ion-icon>
            </ion-button>
          </div>
        </div>
      </ion-label>
    </ion-item>
  </ion-card>
  
  <!-- <ion-infinite-scroll threshold="10px" position="bottom" (ionInfinite)="loadData($event)">
    <ion-infinite-scroll-content loadingSpinner="bubbles"  loadingText="Loading more data..."></ion-infinite-scroll-content>
  </ion-infinite-scroll> -->

  <!-- <ion-fab *ngIf="hasMenuAccess('create_warning')" vertical="bottom" horizontal="end" slot="fixed">
    <ion-fab-button routerLink="/createwarning">
      <ion-icon name="add"></ion-icon>
    </ion-fab-button>
  </ion-fab> -->
</ng-container>
<ng-container *ngIf="!list.length">
  <div class="nodatacss">
    <div class="nodatablockcss">
      {{'NO_RECORDS_FOUND' | translate}}  
    </div>
 </div>  
</ng-container>

<ion-infinite-scroll threshold="100px" (ionInfinite)="loadMoreWarnings($event)">
  <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Loading more warnings...">
  </ion-infinite-scroll-content>
</ion-infinite-scroll>
</ion-content>

<ion-footer class="ion-no-border footerTabsBt">
  <ion-row>
  </ion-row>
</ion-footer>
