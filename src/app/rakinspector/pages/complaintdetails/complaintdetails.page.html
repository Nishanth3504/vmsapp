<ion-header class="ion-no-border bgColortransparent">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="home"></ion-back-button>
    </ion-buttons>
    <ion-title> {{'COMPLAINT_DETAILS' | translate}} </ion-title>
  </ion-toolbar>
  </ion-header>


  <ion-content class="tranDetailsBlockCont m-top tranDetailsGrid-column" *ngIf="complaintData">
    <ion-card>
      <ion-grid>
        <ion-row>
          <ion-col size="12">
            <ion-text>
              <h5>{{complaintData.reference_number}}</h5>
            </ion-text>
          </ion-col>


          <ion-col size="6" sizeLg="3" sizeMd="4" sizeSm="4">
            <ion-text>
            <h5> {{'AGENCY' | translate}} </h5>
            </ion-text>
            <ion-text>
              <h6>{{ setLanguage === 'ar'? complaintData.agency_name_ar :complaintData.agency_name_en}}</h6>
            </ion-text>
          </ion-col>

          <ion-col size="6" sizeLg="3" sizeMd="4" sizeSm="4">
            <ion-text>
            <h5> {{'COMPLAINT_TYPE' | translate}} </h5>
            </ion-text>
            <ion-text>
              <h6>{{ setLanguage === 'ar'? complaintData.complaint_type_ar :complaintData.complaint_type_en}}</h6>
            </ion-text>
          </ion-col>

          <ion-col size="6" sizeLg="3" sizeMd="4" sizeSm="4">
            <ion-text>
              <h5>
                {{'AREA_NAME' | translate }}
              </h5>
            </ion-text>
            <ion-text>
              <h6>
                {{ setLanguage === 'ar' ? complaintData.description_ar : complaintData.description_en}}
              </h6>
            </ion-text>
          </ion-col>

          <ion-col size="6" sizeLg="3" sizeMd="4" sizeSm="4">
            <ion-text>
              <h5>
                {{'SECTOR' | translate }}
              </h5>
            </ion-text>
            <ion-text>
              <h6>
                {{complaintData.sector}}
              </h6>
            </ion-text>
          </ion-col>

          <ion-col size="6" sizeLg="3" sizeMd="4" sizeSm="4">
            <ion-text>
              <h5>
                {{'PRIORITY' | translate }}
              </h5>
            </ion-text>
            <ion-text>
              <h6>
                {{complaintData.priority}}
              </h6>
            </ion-text>
          </ion-col>

          <ion-col size="6" sizeLg="3" sizeMd="4" sizeSm="4">
            <ion-text>
              <h5>
                {{'DESCRIPTION_TEXT' | translate }}
              </h5>
            </ion-text>
            <ion-text>
              <h6>
                {{complaintData.description}}
              </h6>
            </ion-text>
          </ion-col>

          <ion-col size="6" sizeLg="3" sizeMd="4" sizeSm="4">
            <ion-text>
              <h5>
                {{'CREATED_BY' | translate }}
              </h5>
            </ion-text>
            <ion-text>
              <h6>
                {{complaintData.first_name}} {{complaintData.last_name}}
              </h6>
            </ion-text>
          </ion-col>

          <ion-col size="6" sizeLg="3" sizeMd="4" sizeSm="4">
            <ion-text>
              <h5> {{'status' | translate}} </h5>
            </ion-text>
            <ion-text>
              <h6>
                {{complaintData.status}}
              </h6>
            </ion-text>
          </ion-col>

        </ion-row>
      </ion-grid>
    </ion-card>

    <ion-card>
      <ion-text>{{ 'ATTACHMENTS' | translate }}</ion-text>
      <ion-text>
        <ion-grid>
          <!-- Show the images if docsImages has data -->
          <ion-row class="violationDocumentRow" *ngIf="docsImages.length > 0">
            <ion-col size="4" *ngFor="let row of docsImages[0]">
              <ion-img-viewer 
                title="Document" 
                scheme="dark" 
                [src]="imageBase + row" 
                *ngIf="row" 
                alt="Document Not Uploaded">
              </ion-img-viewer>
            </ion-col>
          </ion-row>
          
          <!-- Show no attachments message if docsImages is empty -->
          <ion-row class="violationDocumentRow" *ngIf="docsImages.length === 0">
            <ion-text class="noFound">No Attachments Found</ion-text>
          </ion-row>
    
          <!-- Show video button if video names are valid -->
          <ion-col size="12" *ngIf="isValidVideoName(complaintData.video_names)">
            <ion-text>
              <h5>{{ 'VIDEO' | translate }}</h5>
            </ion-text>
            <ion-button (click)="download()">
              {{ isOnline ? 'DOWNLOAD' : ('PLAY' | translate) }}
            </ion-button>
          </ion-col>
        </ion-grid>
      </ion-text>
    </ion-card>
    



  </ion-content> 